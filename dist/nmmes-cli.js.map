{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap 701c996672be42398402","external \"path\"","external \"fs\"","external \"nmmes-backend\"","/home/ayrton/Documents/nmmes-cli/package.json","external \"nmmes-module-he-audio\"","external \"nmmes-module-sample\"","external \"nmmes-module-normalize\"","external \"nmmes-module-encoder\"","/home/ayrton/Documents/nmmes-cli/src/utils/index.js","external \"chalk\"","/home/ayrton/Documents/nmmes-cli/src/profiles/anime-10bit.json","/home/ayrton/Documents/nmmes-cli/src/profiles/anime.json","/home/ayrton/Documents/nmmes-cli/src/index.js","/home/ayrton/Documents/nmmes-cli/src/options.js","external \"lodash/merge\"","external \"os\"","external \"yargs\"","external \"git-rev-sync\"","/home/ayrton/Documents/nmmes-cli/src/utils/video.js","external \"bluebird\"","external \"mime\"","external \"recursive-readdir\"","/home/ayrton/Documents/nmmes-cli/src/utils/profile.js","external \"is-url\"","external \"request-promise-native\"","/home/ayrton/Documents/nmmes-cli/src/profiles /\\.json$/","/home/ayrton/Documents/nmmes-cli/src/profiles /^\\.\\/.*\\.json$/","external \"requireg\"","external \"nmmes-module-autocrop\""],"names":["console","log","STOPREQ","process","on","options","getFlags","debug","Logger","setLevel","trace","moduleClasses","require","heAudio","normalize","sample","autocrop","Object","assign","modules","reduce","name","descriptor","module","requireg","e","Error","error","keys","join","videos","_","arr","path","push","input","output","Path","resolve","tempDirectory","basename","extname","outputFormat","entries","map","modulePair","moduleClass","moduleOptions","length","info","vid","chalk","yellow","relative","v","run","warn","fs","existsSync","destination","bold","describe","group","alias","default","os","tmpdir","Package","type","cwd","choices","normalizer","defaults","language","encoder","video","bitratePerChannel","encodeLossless","downmix","args","yargs","usage","argv","yargAliases","parsed","aliases","help","watch","version","description","showHelp","exit","realpathSync","gitVer","branch","short","explicitFlags","flags","option","userSetOption","searchForOption","indexOf","aliasIndex","flagsToModuleOptions","vf","videoCodec","bitdepth","pixel_format","scale","preset","quality","crf","preview","t","previewLength","nativeLangage","forceHeAudio","force","downmixHeAudio","applyAliases","flag","profile","getProfile","recursive","bluebird","promisify","promisifyAll","ignoreFunc","file","stats","isDirectory","isVideo","statAsync","isFile","getPaths","SUPPORTED_EXTENSIONS","ext","mime","getType","startsWith","localProfiles","profiles","idx","profileLocation","isUrl","rp","uri","json","readFile","err","data","JSON","parse"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA,iC;;;;;;ACAA,+B;;;;;;ACAA,0C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA,+BAA+B,UAAU;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,E;;;;;;AChEA,kD;;;;;;ACAA,gD;;;;;;ACAA,mD;;;;;;ACAA,iD;;;;;;;;;;;ACAA;;;;;;;ACAA,kC;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,E;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdAA,QAAQC,GAAR,CAAY,YAAZ;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;;AAEA;AACA;;AAEA,IAAIC,UAAU,KAAd;;AAEAC,QAAQC,EAAR,CAAW,QAAX,E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,4CAAAtB,CAAKG,QAAL,CAAcc,EAAElB,MAAF,CAASH,IAAvB,CAAlC,CAAlB;AACAzB,YAAA,qDAAAA,CAAOD,KAAP,CAAc,UAAS,6CAAA4C,CAAMS,IAAN,CAAWN,EAAElB,MAAF,CAASH,IAApB,CAA0B,OAAM,6CAAAkB,CAAMS,IAAN,CAAWD,WAAX,CAAwB,GAA/E;AACH;AACJ;;AAEDnD,IAAA,qDAAAA,CAAOyC,IAAP,CAAY,sBAAZ;AACH,CAlFD;;AAoFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"nmmes-cli.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"path\"), require(\"fs\"), require(\"nmmes-backend\"), require(\"nmmes-module-he-audio\"), require(\"nmmes-module-sample\"), require(\"nmmes-module-normalize\"), require(\"nmmes-module-encoder\"), require(\"chalk\"), require(\"lodash/merge\"), require(\"os\"), require(\"yargs\"), require(\"git-rev-sync\"), require(\"bluebird\"), require(\"mime\"), require(\"recursive-readdir\"), require(\"is-url\"), require(\"request-promise-native\"), require(\"requireg\"), require(\"nmmes-module-autocrop\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"path\", \"fs\", \"nmmes-backend\", \"nmmes-module-he-audio\", \"nmmes-module-sample\", \"nmmes-module-normalize\", \"nmmes-module-encoder\", \"chalk\", \"lodash/merge\", \"os\", \"yargs\", \"git-rev-sync\", \"bluebird\", \"mime\", \"recursive-readdir\", \"is-url\", \"request-promise-native\", \"requireg\", \"nmmes-module-autocrop\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"nmmes-cli\"] = factory(require(\"path\"), require(\"fs\"), require(\"nmmes-backend\"), require(\"nmmes-module-he-audio\"), require(\"nmmes-module-sample\"), require(\"nmmes-module-normalize\"), require(\"nmmes-module-encoder\"), require(\"chalk\"), require(\"lodash/merge\"), require(\"os\"), require(\"yargs\"), require(\"git-rev-sync\"), require(\"bluebird\"), require(\"mime\"), require(\"recursive-readdir\"), require(\"is-url\"), require(\"request-promise-native\"), require(\"requireg\"), require(\"nmmes-module-autocrop\"));\n\telse\n\t\troot[\"nmmes-cli\"] = factory(root[\"path\"], root[\"fs\"], root[\"nmmes-backend\"], root[\"nmmes-module-he-audio\"], root[\"nmmes-module-sample\"], root[\"nmmes-module-normalize\"], root[\"nmmes-module-encoder\"], root[\"chalk\"], root[\"lodash/merge\"], root[\"os\"], root[\"yargs\"], root[\"git-rev-sync\"], root[\"bluebird\"], root[\"mime\"], root[\"recursive-readdir\"], root[\"is-url\"], root[\"request-promise-native\"], root[\"requireg\"], root[\"nmmes-module-autocrop\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_17__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_20__, __WEBPACK_EXTERNAL_MODULE_21__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_28__, __WEBPACK_EXTERNAL_MODULE_29__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 12);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 701c996672be42398402","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"nmmes-backend\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nmmes-backend\"\n// module id = 2\n// module chunks = 0","module.exports = {\n\t\"name\": \"nmmes-cli\",\n\t\"version\": \"0.0.1\",\n\t\"description\": \"A command line interface front end for nmmes-backend.\",\n\t\"author\": \"Ayrton Sparling\",\n\t\"license\": \"LGPL-3.0\",\n\t\"engines\": {\n\t\t\"node\": \">=6.4.0\"\n\t},\n\t\"bin\": {\n\t\t\"nmmes\": \"nmmes-cli.js\"\n\t},\n\t\"scripts\": {\n\t\t\"test\": \"npm outdated --prod; depcheck; exit 0\",\n\t\t\"dev\": \"webpack --env=development --watch\",\n\t\t\"build\": \"webpack --define process.env.NODE_ENV=\\\"production\\\" --env=production --progress\",\n\t\t\"profile\": \"node --prof-process isolate-0xnnnnnnnnnnnn-v8.log > processed.txt\",\n\t\t\"preversion\": \"npm test\",\n\t\t\"version\": \"git add . && git commit -S\",\n\t\t\"postversion\": \"git push\",\n\t\t\"patch-release\": \"npm version patch && npm publish\"\n\t},\n\t\"main\": \"dist/nmmes-cli.js\",\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://github.com/NMMES/nmmes-cli.git\"\n\t},\n\t\"dependencies\": {\n\t\t\"blessed\": \"^0.1.81\",\n\t\t\"bluebird\": \"^3.5.1\",\n\t\t\"chalk\": \"^2.1.0\",\n\t\t\"cli-spinners\": \"^1.1.0\",\n\t\t\"figures\": \"^2.0.0\",\n\t\t\"fs-extra\": \"^4.0.2\",\n\t\t\"git-rev-sync\": \"^1.9.1\",\n\t\t\"is-url\": \"^1.2.2\",\n\t\t\"lodash\": \"^4.17.4\",\n\t\t\"mime\": \"^2.0.3\",\n\t\t\"moment\": \"^2.19.0\",\n\t\t\"moment-duration-format\": \"^1.3.0\",\n\t\t\"node-noop\": \"^1.0.0\",\n\t\t\"recursive-readdir\": \"^2.2.1\",\n\t\t\"request\": \"^2.83.0\",\n\t\t\"request-promise-native\": \"^1.0.5\",\n\t\t\"requireg\": \"^0.1.7\",\n\t\t\"source-map-support\": \"^0.5.0\",\n\t\t\"yargs\": \"^9.0.1\"\n\t},\n\t\"devDependencies\": {\n\t\t\"babel-core\": \"^6.26.0\",\n\t\t\"babel-eslint\": \"^8.0.1\",\n\t\t\"babel-loader\": \"^7.1.2\",\n\t\t\"babel-plugin-lodash\": \"^3.2.11\",\n\t\t\"babel-plugin-module-resolver\": \"^2.7.1\",\n\t\t\"babel-preset-es2016\": \"^6.24.1\",\n\t\t\"babel-preset-stage-2\": \"^6.24.1\",\n\t\t\"babel-register\": \"^6.26.0\",\n\t\t\"babel-runtime\": \"^6.26.0\",\n\t\t\"depcheck\": \"^0.6.8\",\n\t\t\"eslint\": \"^4.8.0\",\n\t\t\"source-map-loader\": \"^0.2.2\",\n\t\t\"webpack\": \"^3.6.0\",\n\t\t\"webpack-node-externals\": \"^1.6.0\"\n\t}\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../package.json\n// module id = 3\n// module chunks = 0","module.exports = require(\"nmmes-module-he-audio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nmmes-module-he-audio\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"nmmes-module-sample\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nmmes-module-sample\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"nmmes-module-normalize\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nmmes-module-normalize\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"nmmes-module-encoder\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nmmes-module-encoder\"\n// module id = 7\n// module chunks = 0","export * from './video.js';\nexport * from './profile.js';\n\n\n\n// WEBPACK FOOTER //\n// ./utils/index.js","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 9\n// module chunks = 0","module.exports = {\n\t\"version\": 1,\n\t\"moduleOptions\": {\n\t\t\"nmmes-module-encoder\": {\n\t\t\t\"defaults\": {\n\t\t\t\t\"video\": {\n\t\t\t\t\t\"vf\": \"deband=r=32:1thr=0.01:2thr=0.01:3thr=0.01:4thr=0.01\",\n\t\t\t\t\t\"pixel_format\": \"yuv420p10le\",\n\t\t\t\t\t\"preset\": \"medium\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"preset\": \"medium\",\n\t\"heAudio\": true\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./profiles/anime-10bit.json\n// module id = 10\n// module chunks = 0","module.exports = {\n\t\"version\": 1,\n\t\"moduleOptions\": {\n\t\t\"nmmes-module-encoder\": {\n\t\t\t\"defaults\": {\n\t\t\t\t\"video\": {\n\t\t\t\t\t\"pixel_format\": \"yuv420p\",\n\t\t\t\t\t\"preset\": \"medium\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\t\"preset\": \"medium\",\n\t\"heAudio\": true\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./profiles/anime.json\n// module id = 11\n// module chunks = 0","console.log('Loading...');\nimport getFlags from './options.js';\nimport * as utils from './utils';\nimport chalk from 'chalk';\nimport {\n    Video,\n    Logger\n} from 'nmmes-backend';\nimport requireg from 'requireg';\nimport Path from 'path';\nimport fs from 'fs';\n\n// Make sure log level is at default info\n// Logger.setLevel('info');\n\nlet STOPREQ = false;\n\nprocess.on('SIGINT', () => STOPREQ = true);\n\n(async() => {\n    let options = await getFlags();\n\n    if (options.debug)\n        Logger.setLevel('trace');\n\n    Logger.trace('Options:', options);\n\n    let moduleClasses = {\n        'nmmes-module-encoder': require('nmmes-module-encoder')\n    };\n\n    if (options.heAudio)\n        moduleClasses['nmmes-module-he-audio'] = require('nmmes-module-he-audio');\n    if (options.normalize)\n        moduleClasses['nmmes-module-normalize'] = require('nmmes-module-normalize');\n    if (options.sample)\n        moduleClasses['nmmes-module-sample'] = require('nmmes-module-sample');\n    if (options.autocrop)\n        moduleClasses['nmmes-module-autocrop'] = require('nmmes-module-autocrop');\n\n    try {\n        Object.assign(moduleClasses, options.modules.reduce((modules, name) => {\n            const descriptor = `nmmes-module-${name}`;\n            let module;\n            try {\n                module = requireg(descriptor);\n            } catch (e) {\n                Logger.debug(e);\n                throw new Error(`Module ${descriptor} (${name}) was not found. Make sure ${descriptor} is installed.`);\n            }\n\n            modules[descriptor] = module;\n            return modules;\n        }, {}));\n    } catch (e) {\n        Logger.error(e);\n        return 1;\n    }\n\n    Logger.debug(`Modules loaded: [${Object.keys(moduleClasses).join()}].`);\n\n    let videos = (await utils.getPaths(options._[0])).reduce((arr, path) => {\n        arr.push(new Video({\n            input: {\n                path\n            },\n            output: {\n                path: Path.resolve(options.tempDirectory, Path.basename(path, Path.extname(path)) + '.' + options.outputFormat)\n            },\n            modules: Object.entries(moduleClasses).map(modulePair => {\n                let name = modulePair[0];\n                let moduleClass = modulePair[1];\n\n                return new moduleClass(options.moduleOptions);\n            })\n        }));\n        return arr;\n    }, []);\n\n    if (videos.length > 1)\n        Logger.info('Videos found:\\n\\t-', videos.map((vid) => {\n            return chalk.yellow(Path.relative(options._[0], vid.input.path));\n        }).join('\\n\\t- '));\n\n    for (let v of videos) {\n        try {\n            await v.run();\n        } catch (e) {\n            Logger.error(e);\n            if (STOPREQ) {\n                Logger.warn('Stopping because SIGINT receieved.');\n                break;\n            }\n        }\n        if (fs.existsSync(v.output.path)) {\n            let destination = Path.resolve(options.destination, Path.basename(v.output.path));\n            Logger.debug(`Moving ${chalk.bold(v.output.path)} -> ${chalk.bold(destination)}.`);\n        }\n    }\n\n    Logger.info('Processing finished.');\n})();\n\n// getFlags(Options => {\n//     // Set log level to trace if debug is enabled\n//     if (Options.debug)\n//         Logger.setLevel('trace');\n//\n//     let screen, videos = [],\n//         killRequestCounter = 0;\n//\n//     Logger.stream = new PassThrough();\n//\n//     // Initialize user interface\n//     if (!Options.simple) {\n//         screen = new Screen();\n//         screen.logStream = Logger.stream;\n//         // console.oldLog = console.log;\n//         // console.oldError = console.error;\n//         console.log = function() {\n//             // console.oldLog.apply(console, arguments);\n//             Logger.log.apply(Logger, arguments);\n//         }\n//         console.error = function() {\n//             // console.oldError.apply(console, arguments);\n//             Logger.error.apply(Logger, arguments);\n//         }\n//\n//         screen.key(['escape', 'q', 'C-c'], function() {\n//             if (++killRequestCounter > 2) {\n//                 Logger.error('Kill signal receieved more than 2 times, forcing process death... DIE ALREADY!');\n//                 screen.destroy();\n//                 process.kill(-process.pid, 'SIGKILL');\n//             }\n//             let videoWasRunning = false;\n//             for (let video of videos) {\n//                 if (video.running) {\n//                     video.stop(new Error('STOPREQ: Video stopped by request of user.'));\n//                     videoWasRunning = true;\n//                 }\n//             }\n//\n//             if (!videoWasRunning) {\n//                 Logger.trace('Stop command receieved... Attempting to stop.');\n//                 process.kill(-process.pid, 'SIGTERM');\n//             }\n//         });\n//     }\n//\n//     if (typeof Options.logFile !== 'undefined') {\n//         const logLocation = Path.resolve(Options.logFile, Package.name + '.log');\n//         const fileLogStream = fs.createWriteStream(logLocation, {\n//             flags: 'a'\n//         });\n//         Logger.stream.on('data', (buffer) => {\n//             fileLogStream.write(stripAnsi(buffer.toString('utf8').trim()) + '\\n');\n//         });\n//         Logger.log(`Logging output to ${logLocation}.`);\n//     }\n//\n//     const heAudio = require('nmmes-module-he-audio');\n//     const encoder = require('nmmes-module-encoder');\n//     const normalizer = require('nmmes-module-normalize');\n//     const autocrop = require('nmmes-module-autocrop');\n//     const stats = require('nmmes-module-stats');\n//     const sample = require('nmmes-module-sample');\n//\n//     // Logger.info(Options)\n//     if (Options.watch) {\n//         Logger.info('Watching directory ', chalk.bold(Options.watch) + '.');\n//         Logger.error('Watch not implemented yet.');\n//     } else {\n//         Logger.info('Locating video file(s) at', chalk.bold(Options._[0]) + '.');\n//         utils.getVideoFiles(Options._[0])\n//             .then(createVideos)\n//             .then(createVideoList)\n//             .then((list) => {\n//                 if (screen)\n//                     screen.videoList = list;\n//             })\n//             .then(loop)\n//             .then(() => {\n//                 Logger.info('All videos completed processing!');\n//             })\n//             .catch((err) => {\n//                 Logger.error(err.message);\n//                 Logger.debug(err);\n//             })\n//             .then(() => {\n//                 if (screen)\n//                     screen.statusFinished();\n//             });\n//     }\n//\n//     function createVideos(paths) {\n//         return new Promise(function(resolve, reject) {\n//             Logger.debug(`Videos found [${paths.length}]:\\n\\t-`, paths.join('\\n\\t-'));\n//             for (let path of paths) {\n//\n//                 let modules = [];\n//                 if (Options.normalizeLevel >= 1) {\n//                     modules.push(new autocrop());\n//                 }\n//                 if (Options.normalizeLevel >= 2) {\n//                     modules.push(new normalizer(Options.moduleOptions['nmmes-module-normalize']));\n//                 }\n//\n//                 // HE Audio\n//                 if (Options.heAudio) {\n//                     modules.push(new heAudio(Options.moduleOptions['nmmes-module-he-audio']));\n//                 }\n//\n//                 // Encoder\n//                 modules.push(new encoder(Options.moduleOptions['nmmes-module-encoder']));\n//\n//                 if (Options.stats)\n//                     modules.push(new stats());\n//\n//                 // Sample\n//                 if (Options.sample) {\n//                     modules.push(new sample(Options.moduleOptions['nmmes-module-sample']));\n//                 }\n//\n//                 if (Options.screenshots) {\n//\n//                 }\n//\n//                 let tempOutput = Path.format({\n//                     dir: Options.tempDirectory,\n//                     name: Path.parse(path).name,\n//                     ext: '.' + Options.outputFormat\n//                 });\n//                 let finalOutput = Path.format({\n//                     dir: Path.resolve(Options.destination, Path.dirname(Path.relative(Options._[0], path))),\n//                     name: Path.parse(path).name,\n//                     ext: '.' + Options.outputFormat\n//                 });\n//                 if (!Options.delete)\n//                     if (fs.existsSync(finalOutput)) {\n//                         Logger.warn('Output for', chalk.bold(Path.basename(path)), 'already exists at', chalk.bold(finalOutput) + '. Skipping...');\n//                         continue;\n//                     }\n//                 videos.push(new Video({\n//                     input: {\n//                         path\n//                     },\n//                     output: {\n//                         path: tempOutput\n//                     },\n//                     modules\n//                 }));\n//             }\n//             resolve(videos);\n//         });\n//     }\n//\n//     function createVideoList(videos) {\n//         return new Promise(function(resolve, reject) {\n//             let items = videos.reduce((arr, video) => {\n//                 let list = new List(video.modules.reduce((arr, module) => {\n//                     let item = new Item({\n//                         title: module.displayName\n//                     });\n//                     module.once('start', () => item.state = 'active');\n//                     module.on('statusUpdate', status => item.status = status);\n//                     module.once('stop', (err) => {\n//                         module.removeListener('statusUpdate', status => item.status = status);\n//                         if (err) {\n//                             item.state = 'failed';\n//                             item.error = err.message.split('\\n')[0];\n//                         } else {\n//                             item.state = 'completed';\n//                         }\n//                     });\n//                     arr.push(item);\n//                     return arr;\n//                 }, []));\n//                 let item = new Item({\n//                     title: video.input.base,\n//                     content: list\n//                 });\n//                 video.once('start', () => {\n//                     item.state = 'active';\n//                 });\n//                 video.once('stopped', (err) => {\n//                     if (err) {\n//                         item.state = 'failed';\n//                         item.error = err.message.split('\\n')[0];\n//                     } else {\n//                         let finalOutput = Path.format({\n//                             dir: Path.resolve(Options.destination, Path.dirname(Path.relative(Options._[0], video.input.path))),\n//                             name: Path.parse(video.input.path).name,\n//                             ext: '.' + Options.outputFormat\n//                         });\n//                         Logger.info('Moving to final destination...', chalk.bold(finalOutput));\n//                         fs.move(video.output.path, finalOutput, {\n//                                 overwrite: Options.delete\n//                             }).then(() => {\n//                                 Logger.info('Move complete.');\n//                                 item.state = 'completed';\n//                             })\n//                             .catch((err) => {\n//                                 item.state = 'failed';\n//                                 item.error = err.message;\n//                             });\n//                     }\n//                 });\n//                 video.on('module-stop', (module, err) => {\n//                     if (module.tolerance !== 'required' && err) {\n//                         item.state = 'warn';\n//                     }\n//                 });\n//                 arr.push(item);\n//                 return arr;\n//             }, []);\n//\n//             resolve(new List(items));\n//         });\n//     }\n//\n//     function loop(i = 0) {\n//         return new Promise(function(resolve, reject) {\n//\n//             if (i >= videos.length)\n//                 return resolve();\n//\n//             videos[i].once('stopped', (err) => {\n//                 if (err && err.message.startsWith('STOPREQ')) return reject(err);\n//                 loop(++i).then(resolve, reject);\n//             }).start();\n//\n//             screen.statusRunning();\n//         });\n//     }\n// });\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import Path from 'path';\nimport os from 'os';\nimport Package from '../package.json';\nimport yargs from 'yargs';\nimport gitVer from 'git-rev-sync';\nimport fs from 'fs';\nimport heAudio from 'nmmes-module-he-audio';\nimport sample from 'nmmes-module-sample';\nimport normalizer from 'nmmes-module-normalize';\nimport encoder from 'nmmes-module-encoder';\nimport {\n    getProfile\n} from './utils';\nimport {\n    merge\n} from 'lodash';\nimport {Logger} from 'nmmes-backend';\n\nconst options = {\n    'version': {\n        describe: 'Displays version information.',\n        group: 'General:'\n    },\n    'help': {\n        describe: 'Displays help page.',\n        group: 'General:'\n    },\n    'g': {\n        alias: 'temp-directory',\n        default: Path.resolve(os.tmpdir(), Package.name),\n        describe: 'Folder where files are stored during encoding.',\n        type: 'string',\n        normalize: true,\n        group: 'General:'\n    },\n    'd': {\n        alias: 'destination',\n        default: Path.resolve(process.cwd(), 'nmmes-out'),\n        describe: 'Folder where encoded files are output.',\n        type: 'string',\n        normalize: true,\n        group: 'General:'\n    },\n    'skip': {\n        describe: 'Skips videos already encoded with a specific codec.',\n        type: 'string',\n        group: 'General:'\n    },\n    'p': {\n        alias: 'preview',\n        default: false,\n        describe: 'Only encode a preview of the video starting at middle of video. See -l/--preview-length for more info.',\n        type: 'boolean',\n        group: 'General:'\n    },\n    'log-file': {\n        default: '',\n        describe: 'Sets the log file location for all output from h265ize.',\n        type: 'string',\n        normalize: true,\n        group: 'General:'\n    },\n    'm': {\n        alias: 'preset',\n        default: 'fast',\n        describe: 'x265 encoder preset.',\n        choices: ['ultrafast', 'superfast', 'veryfast', 'faster', 'fast', 'medium', 'slow', 'slower', 'veryslow', 'placebo'],\n        type: 'string',\n        group: 'General:'\n    },\n    'n': {\n        alias: 'native-language',\n        default: normalizer.defaults().language,\n        describe: 'The native language used to select default audio and subtitles. You may use 3 letter or 2 letter ISO 639-2 Alpha-3/Alpha-2 codes or the full language name. Examples: [eng|en|English|jpn|ja|Japanese]',\n        type: 'string',\n        group: 'General:'\n    },\n    'f': {\n        alias: 'output-format',\n        default: 'mkv',\n        describe: 'Output container format.',\n        choices: ['mkv', 'mp4', 'm4v'],\n        type: 'string',\n        group: 'General:'\n    },\n    'c': {\n        alias: 'video-codec',\n        default: encoder.defaults().defaults.video['c:{POS}'],\n        describe: 'Video codec to encode the video to.',\n        choices: ['libx264', 'libx265'],\n        type: 'string',\n        group: 'Video:'\n    },\n    'profile': {\n        default: 'none',\n        describe: 'My personal presets. Descriptions of each preset\\'s use and function can be found on the github wiki.',\n        type: 'string',\n        group: 'Video:'\n    },\n    // 'x': {\n    //     alias: 'extra-options',\n    //     default: '',\n    //     describe: 'Options provided directly to the encoder.',\n    //     type: 'string',\n    //     group: 'Advanced:'\n    // },\n    'q': {\n        alias: 'quality',\n        default: 19,\n        describe: 'Sets the qp quality target',\n        type: 'number',\n        group: 'Video:'\n    },\n    // 'video-bitrate': {\n    //     default: 0,\n    //     describe: 'Sets the video bitrate, set to 0 to use qp rate control instead of a target bitrate.',\n    //     type: 'number',\n    //     group: 'Video:'\n    // },\n    // 'accurate-timestamps': {\n    //     default: false,\n    //     describe: 'Become blu-ray complient and reduce the max keyInt to the average frame rate.',\n    //     type: 'boolean',\n    //     group: 'Video:'\n    // },\n    'he-audio': {\n        default: false,\n        describe: `Re-encode audio to opus at ${heAudio.defaults().bitratePerChannel}kbps/channel.`,\n        type: 'boolean',\n        group: 'Audio:'\n    },\n    'force-he-audio': {\n        default: heAudio.defaults().encodeLossless,\n        describe: 'Convert all audio to HE format, including lossless formats. Enables he-audio.',\n        type: 'boolean',\n        group: 'Audio:'\n    },\n    'downmix-he-audio': {\n        default: heAudio.defaults().downmix,\n        describe: `Downmix he-audio opus to Dolby Pro Logic II at ${heAudio.defaults().bitratePerChannel}kbps/channel. Enables he-audio.`,\n        type: 'boolean',\n        group: 'Audio:'\n    },\n    // 'multi-pass': {\n    //     default: 0,\n    //     describe: 'Enable multiple passes by the encoder. Must be greater than 1.',\n    //     type: 'number',\n    //     group: 'Video:'\n    // },\n    'bitdepth': {\n        default: 0,\n        describe: 'Forces encoding videos at a specific bitdepth. Set to 0 to maintain original bitdepth.',\n        type: 'number',\n        group: 'Video:'\n    },\n    'screenshots': {\n        default: 0,\n        describe: 'Take n screenshots at regular intervals throughout the finished encode.',\n        type: 'number',\n        group: 'Video:'\n    },\n    'normalize-level': {\n        default: 2,\n        describe: 'Level of normalization to be applied. See https://github.com/FallingSnow/h265ize/issues/56 for more info.',\n        type: 'number',\n        group: 'Video:'\n    },\n    'scale': {\n        default: 0,\n        describe: 'Width videos should be scaled to. Videos will always maintain original aspect ratio. [Examples: 720, 480]',\n        type: 'number',\n        group: 'Video:'\n    },\n    'stats': {\n        default: false,\n        describe: 'Output a stats file containing stats to this destination.',\n        type: 'string',\n        group: 'Advanced:'\n    },\n    'debug': {\n        default: false,\n        describe: 'Enables debug mode. Prints extra debugging information.',\n        type: 'boolean',\n        group: 'Advanced:'\n    },\n    'delete': {\n        default: false,\n        describe: 'Delete source after encoding is complete and replaces it with new encode. [DANGER]',\n        type: 'boolean',\n        group: 'Advanced:'\n    },\n    'l': {\n        alias: 'preview-length',\n        default: sample.defaults().length,\n        describe: 'Milliseconds to encode in preview mode. Max is half the length of input video.',\n        type: 'number',\n        group: 'Advanced:'\n    },\n    // 'watch': {\n    //     default: '',\n    //     describe: 'Watches a directory for new video files to be converted.',\n    //     type: 'string',\n    //     group: 'Advanced:'\n    // },\n    'simple': {\n        default: false,\n        describe: 'Disables the interface. Simply prints to the terminal.',\n        type: 'boolean',\n        group: 'Advanced:'\n    },\n    'modules': {\n        default: [],\n        describe: 'A list of modules to import.',\n        type: 'array',\n        group: 'Advanced:'\n    },\n    'test': {\n        default: false,\n        describe: 'Puts nmmes in test mode. No files will be encoded.',\n        type: 'boolean',\n        group: 'Advanced:'\n    },\n};\nlet args = yargs\n    .usage('Usage: $0 [options] file|directory')\n    .options(options).argv;\n\nconst yargAliases = yargs.choices().parsed.aliases;\n\nif (args.help || (args._.length < 1 && !args.watch)) {\n    console.log('Package:', Package.name, '\\t', 'Version:', Package.version);\n    console.log('Description:', Package.description);\n    yargs.showHelp();\n    process.exit();\n} else if (args.version) {\n    try {\n        console.log(Package);\n        if (fs.existsSync('node_modules')) {\n            let path = Path.resolve(fs.realpathSync('node_modules'), '../');\n            console.log(Package.name, gitVer.branch(path) + '#' + gitVer.short(path));\n        }\n    } catch (e) {\n        console.log(e);\n        console.log(Package.name, Package.version);\n    }\n    process.exit();\n}\n\nfunction explicitFlags() {\n    let flags = {};\n    for (let option of Object.keys(args)) {\n        if (userSetOption(option, false)) flags[option] = args[option];\n    }\n    return flags;\n}\n\nexport function userSetOption(option, aliases = true) {\n    function searchForOption(option) {\n        return ~process.argv.indexOf(option);\n    }\n\n    if (searchForOption(`-${option}`) || searchForOption(`--${option}`))\n        return true;\n\n    // Handle aliases for same option\n    if (aliases)\n        for (let aliasIndex in yargAliases[option]) {\n            let alias = yargAliases[option][aliasIndex];\n            if (searchForOption(`-${alias}`) || searchForOption(`--${alias}`))\n                return true;\n        }\n\n    return false;\n}\n\nfunction flagsToModuleOptions(flags) {\n    let moduleOptions = {\n        'nmmes-module-encoder': {\n            defaults: {\n                video: {\n                    vf: []\n                }\n            }\n        },\n        'nmmes-module-normalize': {},\n        'nmmes-module-he-audio': {},\n        'nmmes-module-sample': {},\n    };\n    if (flags.videoCodec) moduleOptions['nmmes-module-encoder'].defaults.video['c:{POS}'] = flags.videoCodec;\n    if (flags.bitdepth) {\n        if (flags.bitdepth === 8) {\n            moduleOptions['nmmes-module-encoder'].defaults.video.pixel_format = 'yuv420p';\n        } else if (flags.bitdepth === 10) {\n            moduleOptions['nmmes-module-encoder'].defaults.video.pixel_format = 'yuv420p10le';\n        } else if (flags.bitdepth === 12) {\n            moduleOptions['nmmes-module-encoder'].defaults.video.pixel_format = 'yuv420p12le';\n        }\n    }\n    if (flags.scale) moduleOptions['nmmes-module-encoder'].defaults.video.vf.push(`scale=${flags.scale}:-2`);\n    if (flags.preset) moduleOptions['nmmes-module-encoder'].defaults.video.preset = flags.preset;\n    if (flags.quality) moduleOptions['nmmes-module-encoder'].defaults.video.crf = flags.quality;\n    if (flags.preview) {\n        moduleOptions['nmmes-module-encoder'].defaults.video.t = flags.previewLength / 1000;\n    }\n    if (flags.nativeLangage) moduleOptions['nmmes-module-normalize'].language = flags.nativeLangage;\n    if (flags.forceHeAudio) moduleOptions['nmmes-module-he-audio'].force = flags.forceHeAudio;\n    if (flags.downmixHeAudio) moduleOptions['nmmes-module-he-audio'].downmix = flags.downmixHeAudio;\n    if (flags.previewLength) moduleOptions['nmmes-module-sample'].length = flags.previewLength;\n\n    return moduleOptions;\n}\n\nfunction applyAliases(flags) {\n    for (let flag of Object.keys(flags)) {\n        for (let aliasIndex in yargAliases[flag]) {\n            let alias = yargAliases[flag][aliasIndex];\n            flags[alias] = flags[flag];\n        }\n    }\n    return flags;\n}\n\nexport default async function flags() {\n    const profile = await getProfile(args.profile);\n    let options = Object.assign(args, applyAliases(profile), applyAliases(explicitFlags()));\n    merge(options, {\n        moduleOptions: flagsToModuleOptions(options)\n    });\n    return options;\n}\n\nLogger.trace('Options parser loaded.');\n\n\n\n// WEBPACK FOOTER //\n// ./options.js","module.exports = require(\"lodash/merge\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lodash/merge\"\n// module id = 15\n// module chunks = 0","module.exports = require(\"os\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"os\"\n// module id = 16\n// module chunks = 0","module.exports = require(\"yargs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yargs\"\n// module id = 17\n// module chunks = 0","module.exports = require(\"git-rev-sync\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"git-rev-sync\"\n// module id = 18\n// module chunks = 0","import bluebird from 'bluebird';\nimport Path from 'path';\nimport mime from 'mime';\nconst recursive = bluebird.promisify(require('recursive-readdir'));\nconst fs = bluebird.promisifyAll(require('fs'));\n\n\nexport async function getPaths(path) {\n    function ignoreFunc(file, stats) {\n        if (stats.isDirectory())\n            return false;\n        return !isVideo(file);\n    }\n    let stats = await fs.statAsync(path);\n\n    if (stats.isFile() && isVideo(path)) {\n        return [path];\n    } else if (stats.isDirectory()) {\n        return recursive(path, [ignoreFunc]);\n    } else {\n        throw new Error('Unsupported file type.');\n    }\n}\n\nconst SUPPORTED_EXTENSIONS = ['.m2ts'];\n\nexport function isVideo(path) {\n    const ext = Path.extname(path);\n    return mime.getType(ext).startsWith('video/') || ~SUPPORTED_EXTENSIONS.indexOf(ext)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/video.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 20\n// module chunks = 0","module.exports = require(\"mime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mime\"\n// module id = 21\n// module chunks = 0","module.exports = require(\"recursive-readdir\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"recursive-readdir\"\n// module id = 22\n// module chunks = 0","import isUrl from 'is-url';\nimport rp from 'request-promise-native';\nimport fs from 'fs';\nimport Path from 'path';\nimport {Logger} from 'nmmes-backend';\nimport Package from '../../package.json';\nimport chalk from 'chalk';\n\nexport function localProfiles() {\n    let profiles = require.context('../profiles/', true, /\\.json$/).keys();\n    for (let idx in profiles) {\n        profiles[idx] = Path.basename(profiles[idx], '.json');\n    }\n    return profiles;\n}\n\nexport async function getProfile(profileLocation) {\n    if (profileLocation === '') {\n        throw new Error('No profile provided.');\n    }\n    if (!profileLocation || profileLocation === 'none')\n        return {};\n\n\n        if (~localProfiles().indexOf(profileLocation)) {\n            let profile = require('../profiles/'+profileLocation+'.json');\n            return profile;\n        }\n\n        if (isUrl(profileLocation))\n            return await rp({uri: profileLocation, json: true});\n\n        if (fs.existsSync(profileLocation)) {\n            return fs.readFile(profileLocation, (err, data) => {\n                if (err)\n                    throw err;\n                return JSON.parse(data);\n            });\n        }\n\n        Logger.info('Availiable local profiles are:', localProfiles().join(', '));\n        Logger.info(`You may activate a profile via it's local name or a url to a profile json file.`);\n        Logger.info(`Examples:\n\\t${Package.name} --profile anime my/movies/folder\n\\t${Package.name} --profile https://raw.githubusercontent.com/NMMES/nmmes-cli/master/src/profiles/anime.json my/movies/folder`)\n        throw new Error(`Profile ${profileLocation} not found.`);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./utils/profile.js","module.exports = require(\"is-url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"is-url\"\n// module id = 24\n// module chunks = 0","module.exports = require(\"request-promise-native\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"request-promise-native\"\n// module id = 25\n// module chunks = 0","var map = {\n\t\"./anime-10bit.json\": 10,\n\t\"./anime.json\": 11\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 26;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./profiles \\.json$\n// module id = 26\n// module chunks = 0","var map = {\n\t\"./anime-10bit.json\": 10,\n\t\"./anime.json\": 11\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 27;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./profiles ^\\.\\/.*\\.json$\n// module id = 27\n// module chunks = 0","module.exports = require(\"requireg\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"requireg\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"nmmes-module-autocrop\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nmmes-module-autocrop\"\n// module id = 29\n// module chunks = 0"],"sourceRoot":""}